## **Mongoose error: Duplicate name**

![Alt run production mode](pic/01.jpg)

- The lecture starts with development mode to test and analyze, but it is not approximate because the complete err will be printed in the console as well in the production mode.

![Alt post a duplicate name](pic/02.jpg)

- You can see that the response the client gets is treated as a programming error because it is a Mongoose generated error not by us, but it should be an operational error to be correct.

## **Analyze err in the console**

![Alt analyze err in the console](pic/03.jpg)

![Alt test value with console](pic/04.jpg)

## **Catch duplicate error with "code: 11000"**

![Alt catch duplicate error with "code:11000"](pic/05.jpg)

## **Create new error with AppError**

![Alt written function handleDuplicateFieldsDB](pic/06.jpg)

- In fact, this side is very similar to the last lecture in dealing with CastError generated by Mongoose, even the codes to catch the error are directly put together.

## **Final Test with Postman**

![Alt final test](pic/07.jpg)
