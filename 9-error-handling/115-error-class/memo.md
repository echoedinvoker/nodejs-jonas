## **Custom Error Constructor**

![Alt create appError](pic/01.jpg)

### _isOperational_

> Normally the error objects generated by the AppError Class are operational errors, but in the future there must be other types of errors, such as program errors or even errors from third-party packages, so to distinguish them we add the following property.

![Alt isOperational](pic/02.jpg)

## **Error Stack Trace**

### _What is it?_

> In fact, it is something we are already very familiar with.

![Alt err.stack](pic/03.jpg)

![Alt test by Postman](pic/04.jpg)

![Alt stack trace in console](pic/05.jpg)

### _Avoiding its being polluted by AppError Class_

> If the error object is generated using the AppError Class, the part that calls its contructor will also be included in the Stack Trace, and we don't want that so we add the following codes.
>
> ![Alt Error.captureStackTrace](pic/06.jpg)

![Alt import into app.js](pic/07.jpg)

### _Debug: Response is changed_

> We actually use AppError to generate the error object and then use Postman to test it.

![Alt test by Postman: failed](pic/08.jpg)

- We were hoping that the result would be exactly the same as before we imported AppError, but it doesn't seem to be the case so far.

![Alt debug by chrome inspect](pic/09.jpg)

- Just a simple syntax mistake.

![Alt test by Postman: pass](pic/10.jpg)

![Alt stack trace in console is correct](pic/11.jpg)

## **Move Global Error Hanlder(function) to Controller**

![Alt error handler need to move ](pic/12.jpg)

![Alt create errorControllers.js](pic/13.jpg)

![Alt import into app.js back](pic/14.jpg)

![Alt final test](pic/15.jpg)
